{% extends 'layout.njk' %}

{% block content %}

    <section class="container form">

        <form action="/products?_method=PUT" method="POST" enctype="multipart/form-data">

            <div class="header">
                <h3>Editar produto {{ productID.id }}</h3>
            </div>

            <div class="fields">
                {% include 'products/fields.njk' %}

                <input 
                    type="hidden" 
                    name="id"
                    value={{product.id}}
                >

            </div>


            <button class="button edit" type="submit">Atualizar</button>

        </form>

        <form action="/products?_method=DELETE" id="form-delete" method="POST">
            <input type="hidden" name="id" value="{{product.id}}">
            <button class="button delete" type="submit">Deletar</button>
        </form>

    </section>

    <script>
        const formDelete = document.querySelector('#form-delete')

        if(formDelete) {
            formDelete.addEventListener('submit', event => {
                const confirmation = confirm('Deseja deletar?')
            
                if(!confirmation) {
                    event.preventDefault()
                }
            })
        }
    </script>

    <script src="/script.js"></script>
{% endblock %}